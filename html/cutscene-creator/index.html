<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Story Mode Cutscene Creator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="creator-container" class="hidden">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="logo">
                <span class="icon">üé¨</span>
                <h1>Cutscene Creator</h1>
            </div>
            <div class="top-controls">
                <input type="text" id="cutsceneName" placeholder="Cutscene Name..." class="name-input">
                <button id="saveBtn" class="btn btn-save" title="Save Cutscene (Ctrl+S)">
                    <span class="icon">üíæ</span> Save
                </button>
                <button id="closeBtn" class="btn btn-close" title="Close Creator (ESC)">
                    <span class="icon">‚úñ</span>
                </button>
            </div>
        </div>

        <div class="main-layout">
            <!-- Left Sidebar - Saved Cutscenes & Tools -->
            <div class="sidebar left-sidebar">
                <div class="sidebar-section">
                    <h2>Saved Cutscenes</h2>
                    <div id="savedCutscenesList" class="saved-list">
                        <div class="empty-state">No saved cutscenes</div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <h2>Add Elements</h2>
                    <div class="add-buttons">
                        <button class="btn btn-add" id="addActorBtn">
                            <span class="icon">üö∂</span> Add Actor
                        </button>
                        <button class="btn btn-add" id="addPropBtn">
                            <span class="icon">üì¶</span> Add Prop
                        </button>
                        <button class="btn btn-add" id="addVehicleBtn">
                            <span class="icon">üöó</span> Add Vehicle
                        </button>
                        <button class="btn btn-add" id="addAudioBtn">
                            <span class="icon">üîä</span> Add Audio
                        </button>
                    </div>
                </div>

                <div class="sidebar-section">
                    <h2>Freecam Info</h2>
                    <div class="freecam-info">
                        <div class="info-row">
                            <span>Position:</span>
                            <span id="freecamPos">0.00, 0.00, 0.00</span>
                        </div>
                        <div class="info-row">
                            <span>Rotation:</span>
                            <span id="freecamRot">0.00, 0.00, 0.00</span>
                        </div>
                        <div class="info-row">
                            <span>FOV:</span>
                            <span id="freecamFOV">50.0</span>
                        </div>
                    </div>
                    <div class="controls-hint">
                        <strong>Controls:</strong>
                        <div>WASD - Move</div>
                        <div>Mouse - Look</div>
                        <div>Q/E - Up/Down</div>
                        <div>Shift - Fast</div>
                        <div>E - Add Keyframe</div>
                    </div>
                </div>
            </div>

            <!-- Center - Timeline -->
            <div class="center-panel">
                <!-- Playback Controls -->
                <div class="playback-controls">
                    <button id="playBtn" class="btn btn-play" title="Play (Space)">
                        <span class="icon">‚ñ∂</span>
                    </button>
                    <button id="pauseBtn" class="btn btn-pause hidden" title="Pause (Space)">
                        <span class="icon">‚è∏</span>
                    </button>
                    <button id="stopBtn" class="btn btn-stop" title="Stop">
                        <span class="icon">‚èπ</span>
                    </button>
                    <div class="time-display">
                        <span id="currentTime">00:00.000</span>
                        <span>/</span>
                        <span id="totalTime">00:30.000</span>
                    </div>
                    <input type="range" id="timelineScrubber" class="scrubber" min="0" max="30000" value="0">
                </div>

                <!-- Timeline Tracks -->
                <div class="timeline-container">
                    <div class="timeline-header">
                        <div class="track-labels">
                            <div class="track-label">Camera</div>
                            <div id="actorLabels"></div>
                            <div id="propLabels"></div>
                            <div class="track-label">Audio</div>
                        </div>
                    </div>
                    <div class="timeline-tracks" id="timelineTracks">
                        <!-- Camera Track -->
                        <div class="track camera-track" data-track="camera">
                            <div class="track-content" id="cameraTrack"></div>
                        </div>
                        <!-- Actor Tracks -->
                        <div id="actorTracks"></div>
                        <!-- Prop Tracks -->
                        <div id="propTracks"></div>
                        <!-- Audio Track -->
                        <div class="track audio-track" data-track="audio">
                            <div class="track-content" id="audioTrack"></div>
                        </div>
                    </div>
                    <div class="timeline-ruler" id="timelineRuler"></div>
                    <div class="playhead" id="playhead"></div>
                </div>
            </div>

            <!-- Right Sidebar - Properties -->
            <div class="sidebar right-sidebar">
                <div class="sidebar-section">
                    <h2>Global Settings</h2>
                    <div class="property-group">
                        <label>Duration (ms)</label>
                        <input type="number" id="durationInput" value="30000" min="1000" step="1000">
                    </div>
                    <div class="property-group">
                        <label>Time Scale</label>
                        <input type="number" id="timeScaleInput" value="1.0" min="0.1" max="5.0" step="0.1">
                    </div>
                    <div class="property-group">
                        <label>Start Delay (ms)</label>
                        <input type="number" id="startDelayInput" value="0" min="0" step="100">
                    </div>
                    <div class="property-group checkbox-group">
                        <label>
                            <input type="checkbox" id="loopCheckbox">
                            Loop Cutscene
                        </label>
                    </div>
                    <div class="property-group checkbox-group">
                        <label>
                            <input type="checkbox" id="freezeTimeCheckbox">
                            Freeze Time
                        </label>
                    </div>
                    <div class="property-group checkbox-group">
                        <label>
                            <input type="checkbox" id="freezeWeatherCheckbox">
                            Freeze Weather
                        </label>
                    </div>
                </div>

                <div class="sidebar-section" id="keyframeProperties">
                    <h2>Keyframe Properties</h2>
                    <div class="empty-state">Select a keyframe to edit</div>
                </div>

                <div class="sidebar-section" id="cameraProperties" class="hidden">
                    <h2>Camera Settings</h2>
                    <div class="property-group">
                        <label>FOV</label>
                        <input type="number" id="camFOV" value="50" min="10" max="130" step="1">
                    </div>
                    <div class="property-group">
                        <label>DOF Strength</label>
                        <input type="number" id="camDOF" value="0" min="0" max="1" step="0.1">
                    </div>
                    <div class="property-group">
                        <label>Shake Type</label>
                        <select id="camShakeType">
                            <option value="none">None</option>
                            <option value="light">Light</option>
                            <option value="medium">Medium</option>
                            <option value="heavy">Heavy</option>
                        </select>
                    </div>
                    <div class="property-group">
                        <label>Easing</label>
                        <select id="camEasing">
                            <option value="linear">Linear</option>
                            <option value="easeIn">Ease In</option>
                            <option value="easeOut">Ease Out</option>
                            <option value="easeInOut">Ease In/Out</option>
                        </select>
                    </div>
                </div>

                <div class="sidebar-section" id="actorProperties" class="hidden">
                    <h2>Actor Settings</h2>
                    <div class="property-group">
                        <label>Animation Dict</label>
                        <input type="text" id="actorAnimDict" placeholder="amb@world_human_smoking">
                    </div>
                    <div class="property-group">
                        <label>Animation Name</label>
                        <input type="text" id="actorAnimName" placeholder="base">
                    </div>
                    <div class="property-group">
                        <label>Flags</label>
                        <select id="actorAnimFlags">
                            <option value="0">Normal</option>
                            <option value="1">Repeat</option>
                            <option value="2">Stop Last Frame</option>
                            <option value="16">Upperbody Only</option>
                            <option value="32">Allow Rotation</option>
                        </select>
                    </div>
                    <div class="property-group">
                        <label>Blend In</label>
                        <input type="number" id="actorBlendIn" value="1.0" min="0" max="10" step="0.1">
                    </div>
                    <div class="property-group">
                        <label>Blend Out</label>
                        <input type="number" id="actorBlendOut" value="1.0" min="0" max="10" step="0.1">
                    </div>
                    <div class="property-group checkbox-group">
                        <label>
                            <input type="checkbox" id="actorFrozen">
                            Frozen
                        </label>
                    </div>
                    <div class="property-group checkbox-group">
                        <label>
                            <input type="checkbox" id="actorInvisible">
                            Invisible
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modals -->
        <div id="actorModal" class="modal hidden">
            <div class="modal-content">
                <h2>Add Actor</h2>
                <div class="property-group">
                    <label>Name</label>
                    <input type="text" id="newActorName" placeholder="Actor 1">
                </div>
                <div class="property-group">
                    <label>Model</label>
                    <select id="newActorModel">
                        <option value="mp_m_freemode_01">Male Freemode</option>
                        <option value="mp_f_freemode_01">Female Freemode</option>
                        <option value="a_m_y_business_01">Business Male</option>
                        <option value="a_f_y_business_01">Business Female</option>
                    </select>
                </div>
                <div class="modal-buttons">
                    <button class="btn btn-primary" id="confirmAddActor">Add</button>
                    <button class="btn btn-secondary" id="cancelAddActor">Cancel</button>
                </div>
            </div>
        </div>

        <div id="propModal" class="modal hidden">
            <div class="modal-content">
                <h2>Add Prop</h2>
                <div class="property-group">
                    <label>Name</label>
                    <input type="text" id="newPropName" placeholder="Prop 1">
                </div>
                <div class="property-group">
                    <label>Model</label>
                    <select id="newPropModel">
                        <option value="prop_cs_beer_bot_01">Beer Bottle</option>
                        <option value="prop_amb_phone">Phone</option>
                        <option value="prop_cs_script_bottle">Script Bottle</option>
                    </select>
                </div>
                <div class="modal-buttons">
                    <button class="btn btn-primary" id="confirmAddProp">Add</button>
                    <button class="btn btn-secondary" id="cancelAddProp">Cancel</button>
                </div>
            </div>
        </div>

        <div id="audioModal" class="modal hidden">
            <div class="modal-content">
                <h2>Add Audio</h2>
                <div class="property-group">
                    <label>Sound Name</label>
                    <input type="text" id="newAudioSound" placeholder="CHECKPOINT_PERFECT">
                </div>
                <div class="property-group">
                    <label>Volume</label>
                    <input type="number" id="newAudioVolume" value="1.0" min="0" max="1" step="0.1">
                </div>
                <div class="property-group checkbox-group">
                    <label>
                        <input type="checkbox" id="newAudio3D">
                        3D Audio
                    </label>
                </div>
                <div class="modal-buttons">
                    <button class="btn btn-primary" id="confirmAddAudio">Add</button>
                    <button class="btn btn-secondary" id="cancelAddAudio">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>