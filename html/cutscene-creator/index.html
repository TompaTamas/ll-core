<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Story Mode Cutscene Creator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Minimal UI - Shown by default in-game -->
    <div id="minimal-ui" class="hidden">
        <div class="mini-panel">
            <div class="mini-header">
                <span class="icon">üé¨</span>
                <span>Cutscene Creator</span>
            </div>
            <div class="mini-info">
                <div class="mini-row">
                    <span>Pos:</span>
                    <span id="miniPos">0, 0, 0</span>
                </div>
                <div class="mini-row">
                    <span>FOV:</span>
                    <span id="miniFov">50</span>
                </div>
            </div>
            <button id="expandBtn" class="btn-mini">
                <span class="icon">üìã</span> Expand UI
            </button>
        </div>
    </div>

    <!-- Full UI -->
    <div id="full-ui" class="hidden">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="logo">
                <span class="icon">üé¨</span>
                <h1>Cutscene Creator</h1>
            </div>
            <div class="top-controls">
                <input type="text" id="cutsceneName" placeholder="Cutscene Name..." class="name-input">
                <button id="saveBtn" class="btn btn-save">
                    <span class="icon">üíæ</span> Save
                </button>
                <button id="collapseBtn" class="btn btn-secondary">
                    <span class="icon">üóï</span> Collapse
                </button>
            </div>
        </div>

        <div class="main-layout">
            <!-- Left Sidebar -->
            <div class="sidebar left-sidebar">
                <div class="sidebar-section">
                    <h2>Saved Cutscenes</h2>
                    <div id="savedList" class="saved-list">
                        <div class="empty-msg">No saved cutscenes</div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <h2>Camera Info</h2>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">X:</span>
                            <span id="camX" class="info-value">0.00</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Y:</span>
                            <span id="camY" class="info-value">0.00</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Z:</span>
                            <span id="camZ" class="info-value">0.00</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">FOV:</span>
                            <span id="camFov" class="info-value">50</span>
                        </div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <h2>Controls</h2>
                    <div class="controls-list">
                        <div class="control-item"><kbd>WASD</kbd> Move</div>
                        <div class="control-item"><kbd>Mouse</kbd> Look</div>
                        <div class="control-item"><kbd>Q/E</kbd> Up/Down</div>
                        <div class="control-item"><kbd>Shift</kbd> Fast</div>
                        <div class="control-item"><kbd>E</kbd> Add Keyframe</div>
                        <div class="control-item"><kbd>M</kbd> Mouse Mode</div>
                        <div class="control-item"><kbd>Del</kbd> Delete Selected</div>
                    </div>
                </div>
            </div>

            <!-- Center Panel -->
            <div class="center-panel">
                <div class="scene-view">
                    <div class="scene-overlay">
                        <div class="scene-stats">
                            <div class="stat">Actors: <span id="actorCount">0</span></div>
                            <div class="stat">Props: <span id="propCount">0</span></div>
                            <div class="stat">Vehicles: <span id="vehicleCount">0</span></div>
                            <div class="stat">Keyframes: <span id="keyframeCount">0</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Sidebar -->
            <div class="sidebar right-sidebar">
                <div class="sidebar-section">
                    <h2>Global Settings</h2>
                    <div class="property-group">
                        <label>Duration (ms)</label>
                        <input type="number" id="durationInput" value="30000" min="1000" step="1000">
                    </div>
                    <div class="property-group">
                        <label>Time Scale</label>
                        <input type="number" id="timeScaleInput" value="1.0" min="0.1" max="5.0" step="0.1">
                    </div>
                    <div class="property-group checkbox-group">
                        <label>
                            <input type="checkbox" id="loopCheckbox">
                            Loop Cutscene
                        </label>
                    </div>
                </div>

                <div class="sidebar-section">
                    <h2>Quick Actions</h2>
                    <div class="action-buttons">
                        <button class="btn btn-action" id="testPlayBtn">
                            <span class="icon">‚ñ∂Ô∏è</span> Test Play
                        </button>
                        <button class="btn btn-action" id="clearSceneBtn">
                            <span class="icon">üóëÔ∏è</span> Clear Scene
                        </button>
                        <button class="btn btn-action" id="exportBtn">
                            <span class="icon">üì¶</span> Export JSON
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Context Menu -->
    <div id="contextMenu" class="context-menu hidden">
        <div id="contextItems"></div>
    </div>

    <!-- Spawn Menu Modal -->
    <div id="spawnMenu" class="modal hidden">
        <div class="modal-content">
            <h2 id="spawnTitle">Add Entity</h2>
            <div class="property-group">
                <label>Name</label>
                <input type="text" id="spawnName" placeholder="Entity Name">
            </div>
            <div class="property-group">
                <label>Model</label>
                <select id="spawnModel">
                    <option value="">Select Model...</option>
                </select>
            </div>
            <div class="modal-buttons">
                <button id="confirmSpawn" class="btn btn-primary">Spawn</button>
                <button id="cancelSpawn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Vec4 Editor Modal -->
    <div id="vec4Editor" class="modal hidden">
        <div class="modal-content">
            <h2>Edit Position (Vec4)</h2>
            <div class="vec4-grid">
                <div class="property-group">
                    <label>X</label>
                    <input type="number" id="vec4X" step="0.01">
                </div>
                <div class="property-group">
                    <label>Y</label>
                    <input type="number" id="vec4Y" step="0.01">
                </div>
                <div class="property-group">
                    <label>Z</label>
                    <input type="number" id="vec4Z" step="0.01">
                </div>
                <div class="property-group">
                    <label>Heading</label>
                    <input type="number" id="vec4W" step="1" min="0" max="360">
                </div>
            </div>
            <div class="modal-buttons">
                <button id="confirmVec4" class="btn btn-primary">Apply</button>
                <button id="cancelVec4" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Outfit Editor Modal -->
    <div id="outfitEditor" class="modal hidden">
        <div class="modal-content modal-large">
            <h2>Edit Actor Outfit</h2>
            <div id="outfitComponents" class="outfit-grid"></div>
            <div class="modal-buttons">
                <button id="confirmOutfit" class="btn btn-primary">Apply</button>
                <button id="cancelOutfit" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Animation Menu Modal -->
    <div id="animMenu" class="modal hidden">
        <div class="modal-content">
            <h2>Set Animation</h2>
            <div class="property-group">
                <label>Animation Dictionary</label>
                <input type="text" id="animDict" placeholder="e.g. amb@world_human_smoking">
            </div>
            <div class="property-group">
                <label>Animation Name</label>
                <input type="text" id="animName" placeholder="e.g. base">
            </div>
            <div class="property-group">
                <label>Flags</label>
                <select id="animFlags">
                    <option value="0">Normal</option>
                    <option value="1">Repeat</option>
                    <option value="2">Stop Last Frame</option>
                    <option value="16">Upperbody Only</option>
                    <option value="32">Allow Rotation</option>
                </select>
            </div>
            <div class="modal-buttons">
                <button id="confirmAnim" class="btn btn-primary">Set Animation</button>
                <button id="cancelAnim" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Vehicle Mod Menu Modal -->
    <div id="vehModMenu" class="modal hidden">
        <div class="modal-content modal-large">
            <h2>Vehicle Modifications</h2>
            <div id="vehMods" class="mod-grid"></div>
            <div class="modal-buttons">
                <button id="confirmVehMod" class="btn btn-primary">Apply</button>
                <button id="cancelVehMod" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Vehicle Color Menu Modal -->
    <div id="vehColorMenu" class="modal hidden">
        <div class="modal-content">
            <h2>Vehicle Colors</h2>
            <div class="property-group">
                <label>Primary Color (0-159)</label>
                <input type="number" id="vehPrimary" min="0" max="159" value="0">
            </div>
            <div class="property-group">
                <label>Secondary Color (0-159)</label>
                <input type="number" id="vehSecondary" min="0" max="159" value="0">
            </div>
            <div class="modal-buttons">
                <button id="confirmVehColor" class="btn btn-primary">Apply</button>
                <button id="cancelVehColor" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>